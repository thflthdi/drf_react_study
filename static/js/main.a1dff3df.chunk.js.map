{"version":3,"sources":["assets/logo.png","components/StoryList.js","api.js","Constants.js","components/Suggestion.js","Utils/useLocalStorage.js","store.js","components/SuggestionList.js","components/AppLayout.js","pages/About.js","components/Comment.js","components/CommentList.js","components/Post.js","components/PostList.js","pages/Home.js","Utils/base64.js","Utils/forms.js","components/PostNewForm.js","pages/PostNew.js","pages/accounts/Login.js","pages/accounts/Profile.js","pages/accounts/Signup.js","Utils/LoginRequireRoute.js","pages/accounts/index.js","pages/index.js","index.js"],"names":["module","exports","StoryList","style","size","title","axiosInstance","Axios","create","baseURL","process","useAxios","makeUseAxios","axios","Suggestion","suggestionUser","onFollowUser","username","name","avatar_url","is_follow","className","icon","src","alt","length","onClick","getStorageItem","key","initialValue","item","window","localStorage","getItem","JSON","parse","error","console","log","setStorageItem","value","setItem","stringify","useLocalStorage","AppContext","createContext","reducer","prevState","action","type","SET_TOKEN","jwtToken","payload","newState","isAuthenticated","UpdateWithSideEffect","state","dispatch","DELETE_TOKEN","AppProvider","children","useReducerWithSideEffects","store","Provider","useAppContext","useContext","setToken","token","SuggestionList","useState","userList","setUserList","headers","Authorization","url","origUserList","data","loading","useEffect","map","user","config","post","then","response","prevUserList","catch","AppLayout","sidebar","LogoImage","Search","mode","Item","About","Comment","comment","author","message","created_at","displayName","avatar","content","datetime","moment","format","fromNow","CommentList","commentContent","setCommentComment","id","commentList","refetch","handleCommentSave","a","apiUrl","group","groupEnd","TextArea","marginBottom","onChange","e","target","block","disabled","Post","handleLike","caption","location","photo","is_like","tag_set","hoverable","cover","actions","HeartTwoTone","twoToneColor","isLike","HeartOutlined","Meta","description","PostList","postList","setPostList","originPostList","method","prevList","currentPost","Home","history","useHistory","push","getBase64FromFile","file","Promise","resolve","reject","reader","FileReader","readAsDataURL","onload","result","onerror","parseErrorMessages","fieldsErrorMessages","Object","entries","reduce","acc","fieldName","errors","validateStatus","help","join","PostNewForm","fileList","setFileList","visible","base64","previewPhoto","setPreviewPhoto","fieldErrors","setFieldErrors","handlePreviewPhoto","preview","originFileObj","handleFinish","fieldValues","formData","FormData","append","forEach","status","notification","open","FrownOutlined","color","layout","onFinish","autoComplete","label","rules","required","hasFeedback","non_field_errors","listType","beforeUpload","onPreview","PlusOutlined","tailLayout","htmlType","footer","onCancel","width","labelCol","span","wrapperCol","offset","PostNew","Login","useLocation","loginRedirectUrl","from","pathname","values","password","SmileOutlined","fn","min","Password","Profile","Signup","fieldsErrors","setFieldsErrors","fieldsErrorsMessage","LoginRequiredRoute","Component","component","kwargs","render","props","to","Routes","match","exact","path","Root","AccountsRoutes","ReactDOM","basename","document","getElementById"],"mappings":"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","file":"static/js/main.a1dff3df.chunk.js","sourcesContent":["module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGcAAAAdCAMAAACAJoJsAAACwVBMVEUAAAAjHyAjHyD///8zIiIjHyBAQEAkICErICsmJiYsISEmIiKAgIAjHyAnISEtLS0kHyIpKSkkICEkHyEkHyE5OTkkICEjHyAzMzMuIyMkJCQjICElHyImISEjICErKyskJCQoKCgkICEkICEkICElICAmHyNAIEAkICEkISEnJyczMzMmJiYkICFVVVUkICAlISEjICAjHyEjHyElICAjHyEjHyEjICEkICEkICAkICIrIiIkHyAkHyEjICAkICAjHyElISEkISElICArKysmICArKysjICEkHyAkHyAkICIkISEnIyMkICElISEkHyAjICEuLi4kHyAjHyAlICUkISEnIyMkICAkJCQjHyAjHyEpIyMkHyEkICIkICEjICEjICAmIiIjICEkICIjICAkICAkISEkICAlHyIkICEwIDAoIiIjICIkHyIkISEkICQmISEkHyEkICElICIjICEkISEkICAkICAkICAjICAjISElHyEjISEkHyAkHyQjISEkISEmICYjICEkICAkISEkICAkHyApIiIjICEkICAkISElICMkJCQjHyEkICAjICEjHyEkHyEjHyEnIiIkICAjICEkHyAkHyEjICAkISEjHyAkICAkICInJyckHyEkICEkISEjICAjICEkHyEjHyEjICMkHyEmJiYjICAmISEkHyEkICAjIyMkICQlISEkICEjIyMnISEkISEkICAkICAkJCQlICIoIiIkJCQjICAjICAjICMkISEnJyckJCQlISEkICIjIyMkICEjICIpISEjICEkIiIjICAmIiImHyIkICAjIyMkHyEjISEkHyEkHyEkISEjICAmICMjICIkHyAlHyUlICAkHyAkJCQjHyMlHyElICIjICAkICEkICEkHyAlICAkHyAoICgkICAjICEmHyMlIiIkICEkICAkHyQjHyAYxkEZAAAA6nRSTlMA/fwBD/4E+hgUF0MC7i4Rchn5nPsJ+OYKFjLgWi/pBioTucDydlEIyUYaBRuoA3d9l7zDZ8xz2tBHgR7NlN+GikVObxJfDMr03XlNO6E+xdIL1b0wXUK/FfWDLKuAsNHnNcJw751rf1K4ECaYalxANrOqYdmFj8eWrl6SdO0xbZUokZ5Vz+Ql4daNYCO0t5nL23s0h9jsrJ9W9r5xIZPqZLXwpMRQmiKtPevOJDiE8R0nY36vK1ktB7amSIwNDnV4M7KJH+hb9zxKxjqjbOPzVKdYkN4pN9QcQYtoV+K65W7cII6gSVOxPzlNBvrEAAAEaklEQVR4XrXNU5OeiQJF4fV+atq2EXd3bNu2PbE5sTO2bds+tm2sX3HqfFW5m75IJf3c7dq7agP0+GFBQS+6Ulfw02e4GfKqQ99oBl34gc7hJugxy98/oEl0Yb/WcxP0dCmzNJkuvKcDuHHN+c5mnibyLcJ35adl67nq/TmJ3Jg6O6FGs/gWkZBxGvoNN6a/V6CvZlH1nTwgdeqXxM2eeBLyRmcV6MnK481QOTEziwhxRatuT2cGQGb768RB+Kklb8ca3gXY9hBEUj4Cyl4jboEL4UlNpJ93f0Ryu8HPw0BpoBkAp/UMwJiQru5t56vAHY9rcGe0vIl0HUfrLa8BLdvVPldD90I4cB0bTEunLOSfNgL82XUwTRPZosnhGnP1CKQ+ryVhgAJtBcpyrV2zS/0vxG7TDZfUTEbqgrs12AQ9dfqU8ToBWvTKL9XhHFNLAY65A76nyazV+X9w8DD9PlSpXwPwlY4GntXnqDqsxbBTH4bPdS0Ny9zVd7muIJLmzDwO6Dlo0M3D1N4Vadl6H8DomfdnsVeTOapJL2RXDtPZwDgLIgCU6wwozPdJoE0roY+5SfCo9oO++Uk8ZkID6+OxMOQpmKGbh0677JomT+hIAPKWjKBRixilAxzCrboJyNEJdwA8rzF4SV8GBupFUmttBEbo6yQGT8By22G4LgKGuhc+1sE+tdi2gwkDtIlrxul8VukTCYPI0VdhU+7CoWYfgB4/VmCr7gR66SAe0n8AKbqTnm6jUN+Hx3Q+sMuVsFFd3bLGy/2rV+hvueaqJpGp47fD+5oIS/eGmzuNjmSuBsBRXQ8M01bSdQ8wSccUlu+HRP0CajQGnLUGMtQdDPdcaEu6zuWads2gQy2FezSZEUExnMl2Op8HRlNhiP4MaNNBlGkOkKljDoWOwzO6DubFd+8GroTRaiYdavFF/S4UEjdYx/KJZo+FZ3VQQ+cQgDfNn9NYrRlUnNYOCJfoWyTrLGCx3l67Gxgb9UOYookwWQfDc2o992moJS/qASpKiOtvEKNO5xHfDzjxo42/aoY3DSVMHa4pTJwWuBRS1HqadHkqSffrgmUVABPsAzv0J3CvpsHT6me8o7+AoZ5n7l3EzfQsPKgDgYEaDVIWJaT16pmgL3NEGz9MKL5kqHTy2T6/9p6MlSW68K0HanX1iwCcNzT1pUdynV521N/pByMOq2focdpG2G35kep9xP3RDTBJ64EVgaEL1Aeq+W8AOeohjh9WayJvq6eqTqklk7WDuIxlGp30oBo9RJv6l/HaCunHxkDRX3X83wCIJbgeYr02FwGc/PtnQOWnJ/Z90gwQ3rrnn0DrkodHVsAtt9ZFKBzV+0LWdt1CHGNHHUz5fzUwHVoe7V3Kvw7eGSYOit44v4i4bY5L5TpF+oZCjuK69Pv3x1ynpP7B1jRX0c0iL7iWWufQzRabA4FNdK//WB4hWd+he+12D6T4eIzuVeenMMR9dLMXX5nwQWbubUl0t+L3Xnnk6arrOPgfG95WRPTKWcwAAAAASUVORK5CYII=\"","import React from \"react\";\nimport { Card } from \"antd\";\nimport \"./StoryList.scss\";\n\nexport default function StoryList({ style }) {\n  return (\n    <div style={style}>\n      <Card size=\"small\" title=\"Storis\">\n        Storis from people you follow will show\n      </Card>\n    </div>\n  );\n}\n","import Axios from \"axios\";\nimport { makeUseAxios } from \"axios-hooks\";\nimport { API_HOST } from \"Constants\";\n\nexport const axiosInstance = Axios.create({\n  baseURL: API_HOST,\n});\n\nexport const useAxios = makeUseAxios({\n  axios: axiosInstance,\n});\n","export const API_HOST =\n  process.env.REACT_APP_API_HOST || \"http://localhost:8000\";\n","import React from \"react\";\nimport { Avatar, Button } from \"antd\";\nimport \"./Suggestion.scss\";\nimport { axiosInstance } from \"api\";\nexport default function Suggestion({ suggestionUser, onFollowUser }) {\n  const { username, name, avatar_url, is_follow } = suggestionUser;\n  return (\n    <div className=\"suggestion\">\n      <div className=\"avatar\">\n        <Avatar\n          size=\"small\"\n          icon={<img src={avatar_url} alt={`${username}'s avatar`} />}\n        />\n      </div>\n      <div className=\"username\">{name.length === 0 ? username : name}</div>\n      <div className=\"action\">\n        {is_follow && \"팔로잉 중\"}\n        {!is_follow && (\n          <Button size=\"small\" onClick={() => onFollowUser(username)}>\n            Follow\n          </Button>\n        )}\n      </div>\n    </div>\n  );\n}\n","import React, { useState } from \"react\";\n\nexport function getStorageItem(key, initialValue) {\n  try {\n    // Get from local storage by key\n    const item = window.localStorage.getItem(key);\n    // Parse stored json or if none return initialValue\n    return item ? JSON.parse(item) : initialValue;\n  } catch (error) {\n    // If error also return initialValue\n    console.log(error);\n    return initialValue;\n  }\n}\nexport function setStorageItem(key, value) {\n  try {\n    window.localStorage.setItem(key, JSON.stringify(value));\n  } catch (error) {\n    console.log(error);\n  }\n}\n\n// Hook\nfunction useLocalStorage(key, initialValue) {\n  // State to store our value\n  // Pass initial state function to useState so logic is only executed once\n  const [storedValue, setStoredValue] = useState(() => {\n    return getStorageItem(key, initialValue);\n  });\n\n  // Return a wrapped version of useState's setter function that ...\n  // ... persists the new value to localStorage.\n  const setValue = (value) => {\n    const valueToStore = value instanceof Function ? value(storedValue) : value;\n    setStoredValue(key, valueToStore);\n  };\n\n  return [storedValue, setValue];\n}\n\nexport default useLocalStorage;\n","import React, { createContext, useReducer, useContext } from \"react\";\nimport useReducerWithSideEffects, {\n  UpdateWithSideEffect,\n  Update,\n} from \"use-reducer-with-side-effects\";\nimport { getStorageItem, setStorageItem } from \"Utils/useLocalStorage\";\nconst AppContext = createContext();\n\nconst reducer = (prevState, action) => {\n  const { type } = action;\n  if (type === SET_TOKEN) {\n    const { payload: jwtToken } = action;\n    const newState = { ...prevState, jwtToken, isAuthenticated: true };\n    return UpdateWithSideEffect(newState, (state, dispatch) => {\n      setStorageItem(\"jwtToken\", jwtToken);\n    });\n  } else if (type === DELETE_TOKEN) {\n    const newState = { ...prevState, jwtToken: \"\", isAuthenticated: false };\n    return UpdateWithSideEffect(newState, (state, dispatch) => {\n      setStorageItem(\"jwtToken\", \"\");\n    });\n  }\n  return prevState;\n};\nexport const AppProvider = ({ children }) => {\n  const jwtToken = getStorageItem(\"jwtToken\", \"\");\n  const [store, dispatch] = useReducerWithSideEffects(reducer, {\n    jwtToken,\n    isAuthenticated: jwtToken.length > 0,\n  });\n  return (\n    <AppContext.Provider value={{ store, dispatch }}>\n      {children}\n    </AppContext.Provider>\n  );\n};\n\nexport const useAppContext = () => useContext(AppContext);\n\nconst SET_TOKEN = \"APP/SET_TOKEN\";\nconst DELETE_TOKEN = \"APP/DELETE_TOKEN\";\n\nexport const setToken = (token) => ({ type: SET_TOKEN, payload: token });\nexport const deleteToken = () => ({ type: DELETE_TOKEN });\n","import React, { useEffect, useState } from \"react\";\nimport { Card } from \"antd\";\nimport \"./SuggestionList.scss\";\nimport Suggestion from \"./Suggestion\";\nimport { useAppContext } from \"store\";\nimport { useAxios, axiosInstance } from \"api\";\n\nexport default function SuggestionList({ style }) {\n  const {\n    store: { jwtToken },\n  } = useAppContext();\n\n  const [userList, setUserList] = useState([]);\n\n  const headers = { Authorization: `JWT ${jwtToken}` };\n\n  const [{ data: origUserList, loading, error }, refetch] = useAxios({\n    url: \"/accounts/suggestions/\",\n    headers,\n  });\n\n  useEffect(() => {\n    if (!origUserList) setUserList([]);\n    else\n      setUserList(origUserList.map((user) => ({ ...user, is_follow: false })));\n  }, [origUserList]);\n\n  const onFollowUser = (username) => {\n    const data = { username };\n    const config = { headers };\n    axiosInstance\n      .post(\"/accounts/follow/\", data, config)\n      .then((response) => {\n        setUserList((prevUserList) =>\n          prevUserList.map(\n            (user) =>\n              user.username !== username ? user : { ...user, is_follow: true }\n            //if(user.username===username){\n            // return {...user,is_follow:true}\n            //}\n            //else return user;\n          )\n        );\n      })\n      .catch((error) => {});\n  };\n\n  return (\n    <div style={style}>\n      <Card size=\"small\" title=\"Suggestion for you\">\n        {loading && <div>loading...</div>}\n        {error && <div>로딩 중에 에러가 발생하였습니다.</div>}\n        {userList.map((suggestionUser) => (\n          <Suggestion\n            key={suggestionUser.username}\n            suggestionUser={suggestionUser}\n            onFollowUser={onFollowUser}\n          />\n        ))}\n      </Card>\n    </div>\n  );\n}\n","import React from \"react\";\nimport { Input, Menu } from \"antd\";\nimport \"./AppLayout.scss\";\nimport StoryList from \"./StoryList\";\nimport SuggestionList from \"./SuggestionList\";\nimport LogoImage from \"assets/logo.png\";\n\nfunction AppLayout({ children, sidebar }) {\n  return (\n    <>\n      <div className=\"app\">\n        <div className=\"header\">\n          <h1 className=\"page-title\">\n            <img src={LogoImage} alt=\"logo\" />\n          </h1>\n          <div className=\"search\">\n            <Input.Search />\n          </div>\n          <div className=\"topnav\">\n            <Menu mode=\"horizontal\">\n              <Menu.Item>menu1</Menu.Item>\n              <Menu.Item>menu2</Menu.Item>\n              <Menu.Item>menu3</Menu.Item>\n            </Menu>\n          </div>\n        </div>\n        <div className=\"contents\">{children}</div>\n        <div className=\"sidebar\">{sidebar}</div>\n        <div className=\"footer\">&copy; 2020. Yejin Hw.</div>\n      </div>\n    </>\n  );\n}\n\nexport default AppLayout;\n","import React from \"react\";\n\nfunction About() {\n  return <div>About</div>;\n}\n\nexport default About;\n","import React from \"react\";\nimport { Avatar, Comment as AntdComment, Tooltip } from \"antd\";\nimport moment from \"moment\";\n\nexport default function Comment({ comment }) {\n  const {\n    author: { username, name, avatar_url },\n    message,\n    created_at,\n  } = comment;\n  const displayName = name.length === 0 ? username : name;\n  return (\n    <AntdComment\n      author={displayName}\n      avatar={<Avatar src={avatar_url} alt={displayName} />}\n      content={<p>{message}</p>}\n      datetime={\n        <Tooltip title={moment().format(created_at)}>\n          <span>{moment(created_at).fromNow()}</span>\n        </Tooltip>\n      }\n    />\n  );\n}\n","import React, { useState } from \"react\";\nimport { Button, Input } from \"antd\";\nimport { axiosInstance, useAxios } from \"api\";\nimport { useAppContext } from \"store\";\nimport Comment from \"./Comment\";\n\nexport default function CommentList({ post }) {\n  const {\n    store: { jwtToken },\n  } = useAppContext();\n\n  const [commentContent, setCommentComment] = useState(\"\");\n\n  const headers = { Authorization: `JWT ${jwtToken}` };\n\n  const [{ data: commentList, loading, error }, refetch] = useAxios({\n    url: `/posts/${post.id}/comments/`,\n    headers,\n  });\n\n  const handleCommentSave = async () => {\n    const apiUrl = `/posts/${post.id}/comments/`;\n\n    console.group(\"handleCommentSave\");\n    try {\n      const response = await axiosInstance.post(\n        apiUrl,\n        { message: commentContent },\n        { headers }\n      );\n      console.log(response);\n      setCommentComment(\"\");\n      refetch();\n    } catch (error) {\n      console.log(error);\n    }\n\n    console.groupEnd();\n  };\n\n  return (\n    <div>\n      {commentList &&\n        commentList.map((comment) => (\n          <Comment key={comment.id} comment={comment} />\n        ))}\n\n      <Input.TextArea\n        style={{ marginBottom: \".5em\" }}\n        value={commentContent}\n        onChange={(e) => setCommentComment(e.target.value)}\n      />\n      <Button\n        block\n        type=\"primary\"\n        disabled={commentContent.length === 0}\n        onClick={handleCommentSave}\n      >\n        댓글 쓰기\n      </Button>\n    </div>\n  );\n}\n","import React from \"react\";\nimport { Avatar, Card, Comment, Tooltip } from \"antd\";\nimport { HeartOutlined, HeartTwoTone, UserOutlined } from \"@ant-design/icons\";\nimport \"./Post.scss\";\nimport { useAppContext } from \"store\";\nimport CommentList from \"./CommentList\";\n\nfunction Post({ post, handleLike }) {\n  const { author, caption, location, photo, tag_set, is_like } = post;\n  const { username, name, avatar_url } = author;\n\n  return (\n    <div className=\"post\">\n      <Card\n        hoverable\n        cover={<img src={photo} alt={caption} />}\n        actions={[\n          is_like ? (\n            <HeartTwoTone\n              twoToneColor=\"#eb2f96\"\n              onClick={() => handleLike({ post, isLike: false })}\n            />\n          ) : (\n            <HeartOutlined onClick={() => handleLike({ post, isLike: true })} />\n          ),\n        ]}\n      >\n        <Card.Meta\n          avatar={\n            <Avatar\n              size=\"large\"\n              icon={<img src={avatar_url} alt={username} />}\n            />\n          }\n          title={location}\n          description={caption}\n          style={{ marginBottom: \"0.5em\" }}\n        />\n\n        <CommentList post={post} />\n      </Card>\n\n      {/* <img src={photo} alt={caption} style={{ width: \"100px\" }} />\n      {caption}, {location} */}\n    </div>\n  );\n}\n\nexport default Post;\n","import React, { useEffect, useState } from \"react\";\nimport { Alert } from \"antd\";\nimport { useAxios, axiosInstance } from \"api\";\nimport Post from \"./Post\";\nimport { useAppContext } from \"store\";\n\nfunction PostList() {\n  const {\n    store: { jwtToken },\n  } = useAppContext();\n\n  const [postList, setPostList] = useState([]);\n\n  const headers = { Authorization: `JWT ${jwtToken}` };\n\n  const [{ data: originPostList, loading, error }, refetch] = useAxios({\n    url: \"/posts/\",\n    headers,\n  });\n\n  useEffect(() => {\n    setPostList(originPostList);\n  }, [originPostList]);\n\n  const handleLike = async ({ post, isLike }) => {\n    const apiUrl = `/posts/${post.id}/like/`;\n    const method = isLike ? \"POST\" : \"DELETE\";\n\n    try {\n      const response = await axiosInstance({\n        url: apiUrl,\n        method,\n        headers,\n      });\n      console.log(\"response :\", response);\n\n      setPostList((prevList) => {\n        return prevList.map((currentPost) =>\n          currentPost === post\n            ? { ...currentPost, is_like: isLike }\n            : currentPost\n        );\n      });\n    } catch (error) {\n      console.log(\"error :\", error);\n    }\n  };\n\n  return (\n    <div>\n      {postList && postList.length === 0 && (\n        <Alert type=\"warning\" message=\"포스팅이 없습니다. :-(\" />\n      )}\n      {postList &&\n        postList.map((post) => (\n          <Post post={post} key={post.id} handleLike={handleLike} />\n        ))}\n    </div>\n  );\n}\n\nexport default PostList;\n","import React from \"react\";\nimport PostList from \"../components/PostList\";\nimport AppLayout from \"components/AppLayout\";\nimport StoryList from \"components/StoryList\";\n\nimport SuggestionList from \"components/SuggestionList\";\nimport { Button } from \"antd\";\nimport { useHistory } from \"react-router-dom\";\n\nfunction Home() {\n  const history = useHistory();\n  const handleClick = () => {\n    history.push(\"/posts/new\");\n  };\n  const sidebar = (\n    <>\n      <Button\n        type=\"primary\"\n        block\n        style={{ marginBottom: \"1rem\" }}\n        onClick={handleClick}\n      >\n        새 포스팅 쓰기\n      </Button>\n      <StoryList style={{ marginBottom: \"1rem\" }} />\n      <SuggestionList />\n    </>\n  );\n  return (\n    <>\n      <AppLayout sidebar={sidebar}>\n        <PostList />\n      </AppLayout>\n    </>\n  );\n}\n\nexport default Home;\n","export function getBase64FromFile(file) {\n  return new Promise((resolve, reject) => {\n    const reader = new FileReader();\n    reader.readAsDataURL(file);\n    reader.onload = () => resolve(reader.result);\n    reader.onerror = (error) => reject(error);\n  });\n}\n","export function parseErrorMessages(fieldsErrorMessages) {\n  return Object.entries(fieldsErrorMessages).reduce(\n    (acc, [fieldName, errors]) => {\n      // errors : [\"m1\", \"m2\"].join(\" \") => \"m1 \"m2\"\n      acc[fieldName] = {\n        validateStatus: \"error\",\n        help: errors.join(\" \"),\n      };\n      return acc;\n    },\n    {}\n  );\n}\n","import React, { useState } from \"react\";\nimport { Button, Form, Input, Modal, Upload, notification } from \"antd\";\nimport { FrownOutlined, PlusOutlined } from \"@ant-design/icons\";\nimport { getBase64FromFile } from \"Utils/base64\";\nimport { axiosInstance } from \"api\";\nimport { useAppContext } from \"store\";\nimport { parseErrorMessages } from \"Utils/forms\";\nimport { useHistory } from \"react-router-dom\";\n\nexport default function PostNewForm() {\n  const {\n    store: { jwtToken },\n  } = useAppContext();\n\n  const history = useHistory();\n\n  const [fileList, setFileList] = useState([]);\n  const [previewPhoto, setPreviewPhoto] = useState({\n    visible: false,\n    base64: null,\n  });\n  const [fieldErrors, setFieldErrors] = useState({});\n\n  const handleUploadChange = ({ fileList }) => {\n    setFileList(fileList);\n  };\n\n  const handlePreviewPhoto = async (file) => {\n    if (!file.url && !file.preview) {\n      file.preview = await getBase64FromFile(file.originFileObj);\n    }\n\n    setPreviewPhoto({\n      visible: true,\n      base64: file.url || file.preview,\n    });\n  };\n\n  const handleFinish = async (fieldValues) => {\n    const {\n      caption,\n      location,\n      photo: { fileList },\n    } = fieldValues;\n\n    const formData = new FormData();\n    formData.append(\"caption\", caption);\n    formData.append(\"location\", location);\n    fileList.forEach((file) => {\n      formData.append(\"photo\", file.originFileObj);\n    });\n\n    const headers = { Authorization: `JWT ${jwtToken}` };\n    try {\n      const response = await axiosInstance.post(\"/posts/\", formData, {\n        headers,\n      });\n      console.log(\"success response :\", response);\n      history.push(\"/\");\n    } catch (error) {\n      if (error.response) {\n        const { status, data: fieldsErrorMessages } = error.response;\n        if (typeof fieldsErrorMessages === \"string\") {\n          notification.open({\n            message: \"서버 오류\",\n            description: `에러) ${status} 응답을 받았습니다. 서버 에러를 확인해주세요.`,\n            icon: <FrownOutlined style={{ color: \"#ff3333\" }} />,\n          });\n        } else {\n          setFieldErrors(parseErrorMessages(fieldsErrorMessages));\n        }\n      }\n    }\n  };\n\n  return (\n    <Form {...layout} onFinish={handleFinish} autoComplete={\"false\"}>\n      <Form.Item\n        label=\"Caption\"\n        name=\"caption\"\n        rules={[{ required: true, message: \"Caption을 입력해주세요.\" }]}\n        hasFeedback\n        {...fieldErrors.caption}\n        {...fieldErrors.non_field_errors}\n      >\n        <Input.TextArea />\n      </Form.Item>\n\n      <Form.Item\n        label=\"Location\"\n        name=\"location\"\n        rules={[{ required: true, message: \"Location을 입력해주세요.\" }]}\n        hasFeedback\n        {...fieldErrors.location}\n      >\n        <Input />\n      </Form.Item>\n\n      <Form.Item\n        label=\"Photo\"\n        name=\"photo\"\n        rules={[{ required: true, message: \"사진을 입력해주세요.\" }]}\n        hasFeedback\n        {...fieldErrors.photo}\n      >\n        <Upload\n          listType=\"picture-card\"\n          fileList={fileList}\n          beforeUpload={() => {\n            return false;\n          }}\n          onChange={handleUploadChange}\n          onPreview={handlePreviewPhoto}\n        >\n          {fileList.length > 0 ? null : (\n            <div>\n              <PlusOutlined />\n              <div className=\"ant-upload-text\">Upload</div>\n            </div>\n          )}\n        </Upload>\n      </Form.Item>\n\n      <Form.Item {...tailLayout}>\n        <Button type=\"primary\" htmlType=\"submit\">\n          Submit\n        </Button>\n      </Form.Item>\n\n      <Modal\n        visible={previewPhoto.visible}\n        footer={null}\n        onCancel={() => setPreviewPhoto({ visible: false })}\n      >\n        <img\n          src={previewPhoto.base64}\n          style={{ width: \"100%\" }}\n          alt=\"Preview\"\n        />\n      </Modal>\n\n      <hr />\n      {JSON.stringify(fileList)}\n    </Form>\n  );\n}\n\nconst layout = {\n  labelCol: { span: 8 },\n  wrapperCol: { span: 16 },\n};\n\nconst tailLayout = {\n  wrapperCol: { offset: 8, span: 16 },\n};\n","import React from \"react\";\nimport PostNewForm from \"components/PostNewForm\";\nimport \"./PostNew.scss\";\nimport { Card } from \"antd\";\nexport default function PostNew() {\n  return (\n    <div className=\"PostNew\">\n      <Card title=\"새 포스팅 쓰기\">\n        <PostNewForm />\n      </Card>\n    </div>\n  );\n}\n","import React, { useState, useEffect } from \"react\";\nimport { Card, Form, Input, Button, notification } from \"antd\";\nimport { SmileOutlined, FrownOutlined } from \"@ant-design/icons\";\nimport { useHistory, useLocation } from \"react-router-dom\";\nimport { axiosInstance } from \"api\";\n\nimport { useAppContext } from \"store\";\nimport { setToken } from \"store\";\nimport { parseErrorMessages } from \"Utils/forms\";\n\nexport default function Login() {\n  const { dispatch } = useAppContext();\n  const location = useLocation();\n  const history = useHistory();\n  const [fieldErrors, setFieldErrors] = useState({});\n\n  const { from: loginRedirectUrl } = location.state || {\n    from: { pathname: \"/\" },\n  };\n\n  const onFinish = (values) => {\n    async function fn() {\n      const { username, password } = values;\n\n      console.log(process.env.PUBLIC_URL);\n\n      setFieldErrors({});\n\n      const data = { username, password };\n      try {\n        const response = await axiosInstance.post(\"/accounts/token/\", data);\n\n        const {\n          data: { token: jwtToken },\n        } = response;\n\n        dispatch(setToken(jwtToken));\n\n        notification.open({\n          message: \"로그인 성공\",\n          icon: <SmileOutlined style={{ color: \"#108ee9\" }} />,\n        });\n\n        history.push(loginRedirectUrl);\n      } catch (error) {\n        if (error.response) {\n          notification.open({\n            message: \"로그인 실패\",\n            description: \"아이디/암호를 확인해주세요.\",\n            icon: <FrownOutlined style={{ color: \"#ff3333\" }} />,\n          });\n\n          const { data: fieldsErrorMessages } = error.response;\n          // fieldsErrorMessages => { username: \"m1 m2\", password: [] }\n          // python: mydict.items()\n          setFieldErrors(parseErrorMessages(fieldsErrorMessages));\n        }\n      }\n    }\n    fn();\n  };\n\n  return (\n    <Card title=\"로그인\">\n      <Form\n        {...layout}\n        onFinish={onFinish}\n        //   onFinishFailed={onFinishFailed}\n        autoComplete={\"false\"}\n      >\n        <Form.Item\n          label=\"Username\"\n          name=\"username\"\n          rules={[\n            { required: true, message: \"Please input your username!\" },\n            { min: 5, message: \"5글자 입력해주세요.\" },\n          ]}\n          hasFeedback\n          {...fieldErrors.username}\n          {...fieldErrors.non_field_errors}\n        >\n          <Input />\n        </Form.Item>\n\n        <Form.Item\n          label=\"Password\"\n          name=\"password\"\n          rules={[{ required: true, message: \"Please input your password!\" }]}\n          {...fieldErrors.password}\n        >\n          <Input.Password />\n        </Form.Item>\n\n        <Form.Item {...tailLayout}>\n          <Button type=\"primary\" htmlType=\"submit\">\n            Submit\n          </Button>\n        </Form.Item>\n      </Form>\n    </Card>\n  );\n}\n\nconst layout = {\n  labelCol: { span: 8 },\n  wrapperCol: { span: 16 },\n};\n\nconst tailLayout = {\n  wrapperCol: { offset: 8, span: 16 },\n};\n","import React from \"react\";\n\nfunction Profile() {\n  return <div>accounts/profile</div>;\n}\n\nexport default Profile;\n","import React, { useState } from \"react\";\nimport { axiosInstance } from \"api\";\nimport { SmileOutlined } from \"@ant-design/icons\";\nimport { Form, Input, Button, notification } from \"antd\";\nimport { useHistory } from \"react-router-dom\";\n\nexport default function Signup() {\n  const history = useHistory();\n  const [fieldsErrors, setFieldsErrors] = useState({});\n\n  const onFinish = (values) => {\n    async function fn() {\n      const { username, password } = values;\n      setFieldsErrors({});\n      const data = { username, password };\n\n      try {\n        await axiosInstance.post(\"/accounts/signup/\", data);\n\n        notification.open({\n          message: \"회원가입 성공\",\n          description: \"로그인 페이지로 이동합니다.\",\n          icon: <SmileOutlined style={{ color: \"#108ee9\" }} />,\n        });\n        history.push(\"accounts/login/\");\n      } catch (error) {\n        if (error.response) {\n          notification.open({\n            message: \"회원가입 실패\",\n            description: \"아이디/암호를 확인해주세요.\",\n            icon: <SmileOutlined style={{ color: \"#ff3333\" }} />,\n          });\n\n          const { data: fieldsErrorsMessage } = error.response;\n          setFieldsErrors(\n            Object.entries(fieldsErrorsMessage).reduce(\n              (acc, [fieldName, errors]) => {\n                acc[fieldName] = {\n                  validateStatus: \"error\",\n                  help: errors.join(\" \"),\n                };\n                return acc;\n              },\n              {}\n            )\n          );\n        }\n      }\n    }\n    fn();\n  };\n  return (\n    <Form\n      {...layout}\n      onFinish={onFinish}\n      //   onFinishFailed={onFinishFailed}\n    >\n      <Form.Item\n        label=\"Username\"\n        name=\"username\"\n        rules={[\n          {\n            required: true,\n            message: \"Please input your username!\",\n          },\n          {\n            min: 5,\n            message: \"5글자 이상 입력하세여\",\n          },\n        ]}\n        hasFeedback\n        {...fieldsErrors.username}\n      >\n        <Input />\n      </Form.Item>\n\n      <Form.Item\n        label=\"Password\"\n        name=\"password\"\n        rules={[\n          {\n            required: true,\n            message: \"Please input your password!\",\n          },\n        ]}\n        {...fieldsErrors.password}\n      >\n        <Input.Password />\n      </Form.Item>\n\n      <Form.Item {...tailLayout}>\n        <Button type=\"primary\" htmlType=\"submit\">\n          Submit\n        </Button>\n      </Form.Item>\n    </Form>\n  );\n}\nconst layout = {\n  labelCol: {\n    span: 8,\n  },\n  wrapperCol: {\n    span: 16,\n  },\n};\nconst tailLayout = {\n  wrapperCol: {\n    offset: 8,\n    span: 16,\n  },\n};\n","import React from \"react\";\nimport { Route, Redirect } from \"react-router-dom\";\nimport { useAppContext } from \"store\";\n\nexport default function LoginRequiredRoute({\n  component: Component,\n  ...kwargs\n}) {\n  const {\n    store: { isAuthenticated },\n  } = useAppContext();\n\n  if (isAuthenticated) {\n  }\n  return (\n    <Route\n      {...kwargs}\n      render={(props) => {\n        if (isAuthenticated) {\n          return <Component {...props} />;\n        } else {\n          return (\n            <Redirect\n              to={{\n                pathname: \"/accounts/login\",\n                state: { from: props.location },\n              }}\n            />\n          );\n        }\n      }}\n    />\n  );\n}\n","import React from \"react\";\nimport { Route } from \"react-router-dom\";\n\nimport Login from \"./Login\";\nimport Profile from \"./Profile\";\nimport Signup from \"./Signup\";\nimport LoginRequiredRoute from \"Utils/LoginRequireRoute\";\n\nfunction Routes({ match }) {\n  return (\n    <>\n      <LoginRequiredRoute\n        exact\n        path={match.url + \"/profile\"}\n        component={Profile}\n      />\n      <Route exact path={match.url + \"/login\"} component={Login} />\n      <Route exact path={match.url + \"/signup\"} component={Signup} />\n    </>\n  );\n}\n\nexport default Routes;\n","import React from \"react\";\nimport { Route } from \"react-router-dom\";\nimport AppLayout from \"components/AppLayout\";\nimport About from \"./About\";\nimport Home from \"./Home\";\nimport PostNew from \"./PostNew\";\nimport AccountsRoutes from \"./accounts\";\nimport LoginRequiredRoute from \"Utils/LoginRequireRoute\";\n\nfunction Root() {\n  return (\n    <>\n      <LoginRequiredRoute exact path=\"/\" component={Home} />\n      <Route exact path=\"/about\" component={About} />\n      <LoginRequiredRoute exact path=\"/posts/new\" component={PostNew} />\n      <Route path=\"/accounts\" component={AccountsRoutes} />\n    </>\n  );\n}\n\nexport default Root;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport Root from \"pages\";\nimport { BrowserRouter } from \"react-router-dom\";\nimport { AppProvider } from \"store\";\nimport \"antd/dist/antd.css\";\nimport \"./index.css\";\n\nReactDOM.render(\n  <BrowserRouter basename={process.env.PUBLIC_URL}>\n    <AppProvider>\n      <Root />\n    </AppProvider>\n  </BrowserRouter>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}